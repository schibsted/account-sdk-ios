<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SchibstedAccount  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="SchibstedAccount  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SchibstedAccount Docs</a></p>
        <p class="header-right"><a href="https://www.github.com/schibsted/account-sdk-ios"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SchibstedAccount Reference</a>
        <img id="carat" src="img/carat.png" />
        SchibstedAccount  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Creating a User.html">Creating a User</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/ClientConfiguration.html">ClientConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ClientConfiguration/Environment.html">â€“ Environment</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IdentityManager.html">IdentityManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IdentityUI.html">IdentityUI</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IdentityUI/Error.html">â€“ Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/IdentityUI/Route.html">â€“ Route</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/User.html">User</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/User/Auth.html">â€“ Auth</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/User/Product.html">â€“ Product</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/User/Profile.html">â€“ Profile</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/User/Agreements.html">â€“ Agreements</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserDelegate.html">UserDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/UserState.html">UserState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Authenticated Requests.html">Authenticated Requests</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/URLSession.html">URLSession</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Error Handling.html">Error Handling</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/ClientError.html">ClientError</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Result.html">Result</a>
              </li>
              <li class="nav-group-task">
                <a href="Error Handling.html#/s:16SchibstedAccount7NoValuea">NoValue</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Debugging.html">Debugging</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Logger.html">Logger</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Tracking.html">Tracking</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/TrackingEventsHandler.html">TrackingEventsHandler</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/TrackingEventsHandlerDelegate.html">TrackingEventsHandlerDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TrackingEvent.html">TrackingEvent</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TrackingEvent/View.html">â€“ View</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TrackingEvent/Engagement.html">â€“ Engagement</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/TrackingEvent/ErrorType.html">â€“ ErrorType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Visual Login.html">Visual Login</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/IdentityUITheme.html">IdentityUITheme</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentityUITheme/Geometry.html">â€“ Geometry</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentityUITheme/Colors.html">â€“ Colors</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentityUITheme/Icons.html">â€“ Icons</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentityUITheme/Fonts.html">â€“ Fonts</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentityUITheme/TextAttributes.html">â€“ TextAttributes</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentityUIConfiguration.html">IdentityUIConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/IdentityUIDelegate.html">IdentityUIDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/IdentityUIResult.html">IdentityUIResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LoginMethod.html">LoginMethod</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LoginMethod/FlowVariant.html">â€“ FlowVariant</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Style.html">Style</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/StyleColorKind.html">StyleColorKind</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StyleColors.html">StyleColors</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/StyleIcons.html">StyleIcons</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/StyleIconKind.html">StyleIconKind</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/StyleFont.html">StyleFont</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Headless Login.html">Headless Login</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/AppLaunchData.html">AppLaunchData</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/IdentityManagerDelegate.html">IdentityManagerDelegate</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Identifiers.html">Identifiers</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/EmailAddress.html">EmailAddress</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/PhoneNumber.html">PhoneNumber</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Identifier.html">Identifier</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Data Models.html">Data Models</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/UserProfile.html">UserProfile</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Terms.html">Terms</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/IdentifierStatus.html">IdentifierStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/RequiredField.html">RequiredField</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/UserProduct.html">UserProduct</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/IdentityManagerProtocol.html">IdentityManagerProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserProtocol.html">UserProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserAuthAPI.html">UserAuthAPI</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserProfileAPI.html">UserProfileAPI</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserAgreementsAPI.html">UserAgreementsAPI</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/UserProductAPI.html">UserProductAPI</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/WebSessionRoutes.html">WebSessionRoutes</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Global Variables.html">Other Global Variables</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other Global Variables.html#/s:16SchibstedAccount10sdkVersionSSv">sdkVersion</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Enums.html">Other Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Birthdate.html">Birthdate</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/LoginFlowDisposition.html">LoginFlowDisposition</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Extensions.html">Other Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions/URLSessionTask.html">URLSessionTask</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions/URLSessionTask/State.html">â€“ State</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Protocols.html">Other Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/TaskHandle.html">TaskHandle</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Structs.html">Other Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Client.html">Client</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Client/Kind.html">â€“ Kind</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Other Typealiases.html">Other Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount18BoolResultCallbacka">BoolResultCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount20ClientResultCallbacka">ClientResultCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount30IdentifierStatusResultCallbacka">IdentifierStatusResultCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount15NoValueCallbacka">NoValueCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount28RequiredFieldsResultCallbacka">RequiredFieldsResultCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount20StringResultCallbacka">StringResultCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount19TermsResultCallbacka">TermsResultCallback</a>
              </li>
              <li class="nav-group-task">
                <a href="Other Typealiases.html#/s:16SchibstedAccount17URLResultCallbacka">URLResultCallback</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='schibstedaccount-ios-sdk' class='heading'>SchibstedAccount iOS SDK</h1>

<p>The SchibstedAccount iOS SDK provides you access to Schibsted identity services via the <a href="https://techdocs.spid.no/#api-reference">SPiD</a> APIs. It provides the following:</p>

<ul>
<li>User management (profiles, logins, signups)</li>
<li>UI based logins</li>
<li>Authenticated request and oauth management</li>
</ul>

<p><strong>Note: The APIs provided by the SDK do not cover the full spectrum of APIs provided by SPiD. If there is functionality missing, please look at the <a href="https://techdocs.spid.no/#api-reference">SPiD API reference</a> and open up an issue for an enhancement request.</strong></p>

<p><a href="https://travis-ci.org/schibsted/account-sdk-ios"><img src="https://travis-ci.org/schibsted/account-sdk-ios.svg?branch=master" alt="Build Status"></a> <a href="https://github.com/schibsted/account-sdk-ios/blob/master/LICENSE"><img src="https://img.shields.io/github/license/schibsted/account-sdk-ios.svg" alt="license"></a> <a href="https://codecov.io/gh/schibsted/account-sdk-ios"><img src="https://codecov.io/gh/schibsted/account-sdk-ios/branch/master/graph/badge.svg" alt="codecov"></a></p>

<ul>
<li><a href="https://schibsted.github.io/account-sdk-ios/">Documentation</a>: Here&rsquo;s the documentation to the <em>latest tagged release</em> (which can be different than the version that&rsquo;s in master).</li>
<li><a href="https://github.com/schibsted/account-sdk-ios/blob/master/CONTRIBUTING.md">Contributing</a>: For details on getting up and running if you are thinking of contributing</li>
</ul>
<h2 id='setup' class='heading'>Setup</h2>
<h3 id='a-href-https-guides-cocoapods-org-using-using-cocoapods-html-cocoapods-a' class='heading'><a href="https://guides.cocoapods.org/using/using-cocoapods.html">CocoaPods</a></h3>

<p>The pod is available as a public cocoapod under the name SchibstedAccount</p>

<p>The SDK is divided in to different subspecs:</p>

<ul>
<li><code>pod &#39;SchibstedAccount&#39;</code>: this is the default and contains APIs to create a <code><a href="Classes/User.html">User</a></code></li>
<li><code>pod &#39;SchibstedAccount/Manager&#39;</code>: the default installs the entire SDK. If you want to only use headless login (i.e. no UI libraries included), then just use this.</li>
</ul>
<h4 id='you-may-want-to-include-a-tracking-subspec-as-well' class='heading'>You may want to include a tracking subspec as well</h4>

<p>The UI does some internal tracking, and allows a <code><a href="Protocols/TrackingEventsHandler.html">TrackingEventsHandler</a></code> to be set in the UI&rsquo;s configuration.
To fulfill this, you can either implement it yourself or use one which is already implemented.</p>

<p><strong>Internal</strong>: There is an internal Schibsted Tracking implementation for the identity SDK availabe <a href="https://github.schibsted.io/spt-identity/identity-sdk-ios-tracking">here</a> and is available from <code>source &quot;git@github.schibsted.io:CocoaPods/Specs.git</code>, so in your pod file you may:</p>

<ul>
<li><code>pod &#39;SchibstedIDTracking&#39;</code>: Adds dependency to the <a href="https://github.schibsted.io/spt-dataanalytics/pulse-tracker-ios">new</a> pulse SDK</li>
</ul>
<h3 id='a-href-https-github-com-carthage-carthage-carthage-a' class='heading'><a href="https://github.com/Carthage/Carthage">Carthage</a></h3>

<p>Add this to your <code>Cartfile</code></p>
<pre class="highlight ruby"><code><span class="n">git</span> <span class="s2">"git@github.com:schibsted/account-sdk-ios.git"</span>
</code></pre>

<p>Then run:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>carthage bootstrap --platform ios
</code></pre>

<p>or</p>
<pre class="highlight shell"><code><span class="gp">$ </span>carthage update --platform ios
</code></pre>

<p><strong>Internal</strong>: And, if you also want to include support for tracking events in the identity UI with the <a href="https://github.schibsted.io/spt-dataanalytics/pulse-tracker-ios">new pulse SDK</a>, add this</p>
<pre class="highlight ruby"><code><span class="n">git</span> <span class="s2">"git@github.schibsted.io:spt-identity/identity-sdk-ios-tracking"</span>
</code></pre>

<p>Carthage will build the frameworks you need to link in your project, so make sure you follow <a href="https://github.com/Carthage/Carthage#getting-started">these steps</a> to include all of them in your project and you should be up and running. If there is something missing -&gt; <a href="mailto:support@spid.no">email us</a>.</p>
<h3 id='strong-get-some-client-credentials-strong' class='heading'><strong>Get some client credentials</strong></h3>

<p>The SDK works by giving you access to Schibsted users. And what kind of access is allowed is determined by a set
of client credentials. The first thing you must do is get some credentials, which can be done through
<a href="http://techdocs.spid.no/selfservice/access/">self service</a>. Learn about environments and merchants.</p>

<p>NOTE: The SDK will <strong>not</strong> work across environments or merchants.</p>
<h2 id='usage' class='heading'>Usage</h2>

<p>The most common use case is to get a hold of a <code><a href="Classes/User.html">User</a></code> object. You can obtain a User object by using a visual or a headless login process. The visual login is the recommended approach, but if the need arises the headless approach is also documented, but not <q>officially</q> supported.</p>
<h3 id='strong-set-your-client-configuration-strong' class='heading'><strong>Set your client configuration</strong></h3>

<p>See above for getting credentials. But once you have them you have to set up a <code><a href="Structs/ClientConfiguration.html">ClientConfiguration</a></code> object:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">clientConfiguration</span> <span class="o">=</span> <span class="kt">ClientConfiguration</span><span class="p">(</span>
        <span class="nv">environment</span><span class="p">:</span> <span class="o">.</span><span class="n">preproduction</span><span class="p">,</span>
        <span class="nv">clientID</span><span class="p">:</span> <span class="s">"&lt;you-client-code&gt;"</span><span class="p">,</span>
        <span class="nv">clientSecret</span><span class="p">:</span> <span class="s">"&lt;your-client-secret&gt;"</span><span class="p">,</span>
        <span class="nv">appURLScheme</span><span class="p">:</span> <span class="kc">nil</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h3 id='strong-check-if-you-already-have-a-user-strong' class='heading'><strong>Check if you already have a user</strong></h3>

<p>To check if you already have a user logged in, you may use the IdentityManager:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="kt">IdentityManager</span><span class="p">(</span><span class="nv">clientConfiguration</span><span class="p">:</span> <span class="n">clientConfiguration</span><span class="p">)</span><span class="o">.</span><span class="n">currentUser</span>
<span class="n">user</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="c1">//...</span>
<span class="k">switch</span> <span class="n">user</span><span class="o">.</span><span class="n">state</span> <span class="p">{</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">loggedIn</span><span class="p">:</span>
    <span class="c1">// Yay, carry on with app</span>
<span class="k">case</span> <span class="o">.</span><span class="nv">loggedOut</span><span class="p">:</span>
    <span class="c1">// Ok, fire up the IdentityUI</span>
<span class="p">}</span>
</code></pre>
<h3 id='strong-visual-login-with-identityui-strong' class='heading'><strong>Visual login with IdentityUI</strong></h3>

<p>To start the login process you can fire up an <code><a href="Classes/IdentityUI.html">IdentityUI</a></code> object, configure it and it will create a <code><a href="Classes/User.html">User</a></code> object for you if everything goes right. It is recommended to use the IdentityUI to create a User object because it makes sure that the correct login flows supported by the Schibsted Identity backend are adhered to (ie: required fields are filled in, and terms and conditions are accepted, etc).</p>
<h4 id='logging-in-with-the-identityui' class='heading'>Logging in with the IdentityUI</h4>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">import</span> <span class="kt">SchibstedAccount</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">identityUI</span><span class="p">:</span> <span class="kt">IdentityUI</span><span class="p">?</span>
    <span class="k">var</span> <span class="nv">user</span><span class="p">:</span> <span class="kt">User</span><span class="p">?</span>

    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">didTapLoginButton</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">identifierType</span><span class="p">:</span> <span class="kt">IdentifierType</span> <span class="o">=</span> <span class="p">(</span><span class="n">sender</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">?</span> <span class="o">.</span><span class="nv">phone</span> <span class="p">:</span> <span class="o">.</span><span class="n">email</span>
        <span class="k">self</span><span class="o">.</span><span class="n">identityUI</span> <span class="o">=</span> <span class="kt">IdentityUI</span><span class="p">(</span><span class="nv">clientConfiguration</span><span class="p">:</span> <span class="n">defaultClientConfiguration</span><span class="p">,</span> <span class="nv">identifierType</span><span class="p">:</span> <span class="n">identifierType</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">identityUI</span><span class="p">?</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="c1">//...</span>
        <span class="k">self</span><span class="o">.</span><span class="n">identityUI</span><span class="p">?</span><span class="o">.</span><span class="nf">presentIdentityProcess</span><span class="p">(</span><span class="nv">from</span><span class="p">:</span> <span class="k">self</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">didTapLogoutButton</span><span class="p">(</span><span class="nv">_</span><span class="p">:</span> <span class="kt">Any</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">user</span><span class="p">?</span><span class="o">.</span><span class="nf">logout</span><span class="p">()</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"User logout done!"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h4 id='identityuidelegate-and-userdelegate' class='heading'>IdentityUIDelegate and UserDelegate</h4>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">IdentityUIDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">didFinish</span><span class="p">(</span><span class="nv">result</span><span class="p">:</span> <span class="kt">IdentityUIResult</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">canceled</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"The user canceled the login process"</span><span class="p">)</span>
        <span class="k">case</span> <span class="kd">let</span> <span class="o">.</span><span class="nf">completed</span><span class="p">(</span><span class="n">user</span><span class="p">):</span>
            <span class="k">self</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="n">user</span>
            <span class="k">self</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="c1">//...</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"User with id </span><span class="se">\(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="se">)</span><span class="s"> is logged in"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UserDelegate</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">user</span><span class="p">(</span><span class="nv">_</span><span class="p">:</span> <span class="kt">User</span><span class="p">,</span> <span class="n">didChangeStateTo</span> <span class="nv">newState</span><span class="p">:</span> <span class="kt">UserState</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="n">newState</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">loggedIn</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"The user logged in"</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">loggedOut</span><span class="p">:</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"The user logged out"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h4 id='ui-customization' class='heading'>UI Customization</h4>

<p>The SDK includes an <code><a href="Structs/IdentityUITheme.html">IdentityUITheme</a></code> object that allows you to customize the look and feel of the identity UI. See the docs for, hopefully, more details.</p>
<h4 id='localization' class='heading'>Localization</h4>

<p>The SDK comes with the following localization support:</p>

<ol>
<li>ðŸ‡³ðŸ‡´ Norwegian BokmÃ¥l</li>
<li>ðŸ‡¸ðŸ‡ª Swedish</li>
<li>ðŸ‡«ðŸ‡® Finnish</li>
</ol>
<h3 id='strong-headless-login-with-identitymanager-strong' class='heading'><strong>Headless login with IdentityManager</strong></h3>

<p>Note: It is recommended to use the UI approach.</p>

<p>The <code><a href="Classes/IdentityManager.html">IdentityManager</a></code> is more bare bones and doesn&rsquo;t ensure any kind of Schibsted identity flows. It can create a user object and also notify you of any changes that happen to the user object. You can assign an <code><a href="Protocols/IdentityManagerDelegate.html">IdentityManagerDelegate</a></code> to it to handle various events that take place:</p>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">SchibstedAccount</span>

<span class="kd">class</span> <span class="kt">ViewController</span><span class="p">:</span> <span class="kt">UIViewController</span><span class="p">,</span> <span class="kt">IdentityManagerDelegate</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">identityManagaer</span> <span class="o">=</span> <span class="kt">SchibstedAccount</span><span class="o">.</span><span class="kt">IdentityManager</span><span class="p">(</span><span class="nv">clientConfiguration</span><span class="p">:</span> <span class="n">clientConfiguration</span><span class="p">)</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">viewDidLoad</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">identityManager</span><span class="o">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="k">self</span>
        <span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">identityManager</span><span class="o">.</span><span class="n">currentUser</span><span class="o">.</span><span class="n">state</span> <span class="o">==</span> <span class="o">.</span><span class="n">loggedIn</span> <span class="p">{</span>
            <span class="c1">// User is already logged in</span>
            <span class="k">return</span>
        <span class="p">}</span>

        <span class="c1">// User not logged in</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">login</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">userStateChanged</span><span class="p">(</span><span class="n">_</span> <span class="nv">state</span><span class="p">:</span> <span class="kt">UserState</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// User has just logged in or just logged out</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="o">.</span><span class="kt">LoggedIn</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"User with id </span><span class="se">\(</span><span class="kt">String</span><span class="p">(</span><span class="nv">describing</span><span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">identityManager</span><span class="o">.</span><span class="n">currentUser</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="se">)</span><span class="s"> is logged in"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">login</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">identityManager</span><span class="o">.</span><span class="nf">sendCode</span><span class="p">(</span><span class="nv">to</span><span class="p">:</span> <span class="kt">PhoneNumber</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
            <span class="k">if</span> <span class="k">case</span> <span class="o">.</span><span class="nf">failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">)</span> <span class="o">=</span> <span class="n">result</span> <span class="p">{</span>
                <span class="nf">print</span><span class="p">(</span><span class="s">"failed to send code"</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">@IBAction</span> <span class="kd">func</span> <span class="nf">validateCode</span><span class="p">(</span><span class="n">_</span> <span class="nv">sender</span><span class="p">:</span> <span class="kt">UIButton</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">code</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">codeTextField</span><span class="o">.</span><span class="n">text</span>
        <span class="n">identityManager</span><span class="o">.</span><span class="nf">validate</span><span class="p">(</span><span class="nv">oneTimeCode</span><span class="p">:</span> <span class="n">code</span><span class="p">,</span> <span class="nv">for</span><span class="p">:</span> <span class="kt">PhoneNumber</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">...</span><span class="p">)</span> <span class="p">{</span>

        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='building-testing-documentaion' class='heading'>Building, testing, documentaion</h3>

<p>See <a href="https://github.com/schibsted/account-sdk-ios/blob/master/CONTRIBUTING.md">contributing.md</a>.</p>

          </section>
        </section>
        <section id="footer">
          <p>Â© 2016-2018 Schibsted Products &amp; Technology</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.9.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
